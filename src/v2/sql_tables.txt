CREATE TABLE IF NOT EXISTS public.a_account_transactions
(
    id bigserial,
    hesap_kodu character varying(16),
    tarih timestamp without time zone NOT NULL,
    tip smallint NOT NULL,
    miktar numeric(18,6) NOT NULL,
    fiyat numeric(18,6) NOT NULL DEFAULT 0,
    doviz_fiyat numeric(18,6) NOT NULL DEFAULT 0,
    para character varying(3) COLLATE pg_catalog."default",
    fatura_id bigint,
    fatura_detay_id bigint,
    PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.a_account_transactions
    OWNER to postgres;

CREATE TABLE IF NOT EXISTS public.a_stock_transactions
(
    id bigserial,
    stok_kodu character varying(32),
    tarih timestamp without time zone NOT NULL,
    tip smallint NOT NULL,
    miktar numeric(18,6) NOT NULL,
    fiyat numeric(18,6) NOT NULL DEFAULT 0,
    doviz_fiyat numeric(18,6) NOT NULL DEFAULT 0,
    para character varying(3) COLLATE pg_catalog."default",
    fatura_id bigint,
    fatura_detay_id bigint,
    PRIMARY KEY (id),
    UNIQUE (stok_kodu, fatura_id, fatura_detay_id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.a_stock_transactions
    OWNER to postgres;


CREATE TABLE IF NOT EXISTS public.a_invoices
(
    id bigserial,
    fatura_no character varying(16) not null,
    fatura_tarihi timestamp without time zone NOT NULL,
    hesap_kodu character varying(16) not null,
    hesa_ismi character varying(160) not null,
    fatura_tipi smallint NOT NULL,
    para character varying(3) COLLATE pg_catalog."default",
    PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.a_invoices
    OWNER to postgres;


CREATE TABLE IF NOT EXISTS public.a_invoice_lines
(
    id bigserial,
    header_id bigint not null,
    stok_kodu character varying(32) not null,
    iskonto numeric(18,3) NOT NULL,
    miktar numeric(18,6) NOT NULL,
    fiyat numeric(18,6) NOT NULL,
    kdv numeric(18,2) NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (header_id)
        REFERENCES public.a_invoices (id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.a_invoice_lines
    OWNER to postgres;


CREATE TABLE IF NOT EXISTS public.a_stocks
(
    id bigserial,
    stok_kodu character varying(32) not null,
    stok_adi character varying(128) not null,
    PRIMARY KEY (id),
    UNIQUE (stok_kodu)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.a_stocks
    OWNER to postgres;